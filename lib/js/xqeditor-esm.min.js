function XqEditor(t={el:""}){if(this.options=t,!this.options.el)throw new Error("XqEditor: el is must selector!");this.editor={value:"",preview:"",words:0,lineNum:0,isScroll:!0,isScale:!1,isPreview:!1,isEdit:!1,isInfo:!1,files:null},this.upload={type:"image",url:""},this.initElem(document.querySelector(this.options.el))}XqEditor.prototype.initElem=function(t){let e=document.createElement("div");e.className="xqeditor",e.innerHTML='<div class="xqeditor-editor">\n        <div class="xqeditor-editor-set">\n            <div class="xqeditor-editor-set-title">\n                <i class="fa fa-edit"></i>\n                <span>XQ Editor</span>\n            </div>\n            <div class="xqeditor-editor-set-btn">\n                <button title="粗体" class="xqeditor-bold">\n                    <i title="粗体" class="fa fa-bold"></i>\n                </button>\n                <button title="斜体" class="xqeditor-italic">\n                    <i title="斜体" class="fa fa-italic"></i>\n                </button>\n                <button title="引用" class="xqeditor-quote">\n                    <i title="引用" class="fa fa-quote-left"></i>\n                </button>\n                <button title="列表" class="xqeditor-list">\n                    <i title="列表" class="fa fa-list"></i>\n                </button>\n                <button title="链接" class="xqeditor-link">\n                    <i title="链接" class="fa fa-link"></i>\n                </button>\n                <button class="file" title="图片">\n                    <i title="图片" class="fa fa-image"></i>\n                    <input type="file" name="file" id="file" accept="image/*">\n                </button>\n                <button title="代码块" class="xqeditor-code">\n                    <i title="代码块" class="fa fa-code"></i>\n                </button>\n                <button title="代码段" class="xqeditor-code-block">\n                    <i title="代码段" class="fa fa-file-code"></i>\n                </button>\n                <button title="表格" class="xqeditor-table">\n                    <i title="表格" class="fa fa-table"></i>\n                </button>\n                <button title="只显示编辑框" class="xqeditor-show-editor">\n                    <i title="只显示编辑框" class="fa fa-eye-slash"></i>\n                </button>\n                <button title="只显示预览" class="xqeditor-show-preview">\n                    <i title="只显示预览" class="fa fa-desktop"></i>\n                </button>\n                <button title="缩放"  class="xqeditor-scale-editor">\n                    <i title="缩放" class="fa fa-arrows-alt"></i>\n                </button>\n                <button title="信息" class="xqeditor-show-info">\n                    <i title="信息" class="fa fa-info-circle"></i>\n                </button>\n            </div>\n        </div>\n        <div class="xqeditor-editor-ipt">\n            <div class="xqeditor-editor-code scroll-box">\n                <div id="markdown-code">\n                    <div name="leftnum" id="leftnum" wrap="soft"></div>\n                    <textarea name="code" class="scroll-box" id="code" wrap="soft"></textarea>\n                </div>\n            </div>\n            <div class="xqeditor-editor-preview">\n                <div id="xqeditor-preview" class="markdown-body scroll-box"></div>\n            </div>\n        </div>\n        <div class="xqeditor-editor-status">\n            <p>字数:<strong id="xqeditor-words">0</strong>,行数:<strong id="xqeditor-lineNum">0</strong>\n            </p>\n            <p>\n                <input id="isScroll" checked type="checkbox"><span>同步滚动</span>\n                <span class="xqeditor-editor-gotop">到顶部</span>\n            </p>\n        </div>\n        <div class="xqeditor-info hide">\n            <div class="xqeditor-info-close"><i class="fa fa-times"></i></div>\n            <h2><i class="fa fa-edit"></i> XQ Editor</h2>\n            <div>\n                <p>小奇编辑器是一款轻巧的Markdown编辑器，包含最常用的功能。</p>\n                <p>目前版本：V0.0.1</p>\n                <p>作者：gitguanqi</p>\n                <p>联系方式：<a href="mailto:contact@guanqi.xyz"><i class="fa fa-envelope"></i> contact@guanqi.xyz</a></p>\n                <p>源码地址：<a href="https://github.com/gitguanqi/xqeditor/" target="_blank">Github <i\n                            class="fa fa-share"></i></a></p>\n            </div>\n        </div>\n    </div>\n    ',t.appendChild(e),this.addEvent()},XqEditor.prototype.addEvent=function(){let t=document.querySelector(".xqeditor-scale-editor"),e=document.querySelector(".xqeditor-show-editor"),i=document.querySelector(".xqeditor-bold"),o=document.querySelector(".xqeditor-italic"),n=document.querySelector(".xqeditor-quote"),d=document.querySelector(".xqeditor-list"),r=document.querySelector(".xqeditor-link"),l=document.querySelector(".xqeditor-code"),s=document.querySelector("#code"),c=document.querySelector("#file"),a=document.querySelector(".xqeditor-editor-gotop"),u=document.querySelector(".xqeditor-code-block"),h=document.querySelector(".xqeditor-table"),q=document.querySelector(".xqeditor-show-preview"),p=document.querySelector(".xqeditor-show-info"),v=document.querySelector(".xqeditor-info-close");a.addEventListener("click",()=>{this.goTop()},!1),s.addEventListener("scroll",()=>{this.changeScroll()},!1),s.addEventListener("keyup",t=>{this.showLineNum(t)},!1),s.addEventListener("change",()=>{this.showPreview()},!1),s.addEventListener("input",()=>{this.showPreview()},!1),i.addEventListener("click",()=>{this.addEditor("bold")},!1),o.addEventListener("click",()=>{this.addEditor("italic")},!1),n.addEventListener("click",()=>{this.addEditor("quote")},!1),d.addEventListener("click",()=>{this.addEditor("list")},!1),r.addEventListener("click",()=>{this.addEditor("link")},!1),l.addEventListener("click",()=>{this.addEditor("code")},!1),u.addEventListener("click",()=>{this.addEditor("codeBlock")},!1),h.addEventListener("click",()=>{this.addEditor("table")},!1),c.addEventListener("change",t=>{this.uploadImg(t)},!1),e.addEventListener("click",()=>{this.toggleEditorMode("edit")},!1),q.addEventListener("click",()=>{this.toggleEditorMode("preview")},!1),t.addEventListener("click",()=>{this.scaleEditor()},!1),p.addEventListener("click",()=>{this.showEditorInfo(!0)},!1),v.addEventListener("click",()=>{this.showEditorInfo(!1)},!1)},XqEditor.prototype.showEditor=function(t=""){this.showLineNum({target:{value:this.editor.value}}),this.showPreview(),this.calcWordAndLine(t)},XqEditor.prototype.showLineNum=function(t){let e=document.getElementById("leftnum"),i=t.target.value;i=i.replace(/\r/gi,""),i=i.split("\n");let o=i.length,n="";for(let t=1;t<o+1;t++)n+=t+"\n";e.innerText=n,n=""},XqEditor.prototype.changeScroll=function(){let t=document.getElementById("xqeditor-preview"),e=document.getElementById("leftnum"),i=document.getElementById("code"),o=document.getElementById("isScroll");e.scrollTop=i.scrollTop,o.checked&&(t.scrollTop=i.scrollTop+100)},XqEditor.prototype.showPreview=function(){let t=document.getElementById("code"),e=document.getElementById("xqeditor-preview"),i=t.value,o=markdownit({highlight:(t,e)=>{if(e&&hljs.getLanguage(e))try{return hljs.highlight(e,t).value}catch(t){throw new Error(t)}return""}});var n=o.render(i);e.innerHTML=n,this.editor.code=i,this.editor.preview=n,this.calcWordAndLine(i)},XqEditor.prototype.calcWordAndLine=function(t){let e=document.getElementById("xqeditor-words"),i=document.getElementById("xqeditor-lineNum");if(t){let o=t.length,n=t.split("\n").length;e.innerText=o,i.innerText=n}},XqEditor.prototype.goTop=function(){let t=document.getElementById("xqeditor-preview"),e=document.querySelector("#code");t.scrollTop=0,e.scrollTop=0},XqEditor.prototype.getVal=function(){let t=document.getElementById("xqeditor-preview"),e=document.querySelector("#code");return{text:e.value,html:t.innerHTML}},XqEditor.prototype.setVal=function(t){let e=document.querySelector("#code");this.editor.value=t,e.value=t,this.showPreview()},XqEditor.prototype.addEditor=function(t,e=""){let i=document.getElementById("code"),o=i.value,n={bold:"\n**加粗内容**\n",italic:"\n*斜体内容*\n",quote:"\n> 引用写这里\n",image:t=>`\n![图片描述](${t})\n`,list:"\n+ 列表项目一\n",link:"\n[链接名称](链接地址)\n",code:"\n`code`\n",codeBlock:"\n```js\ncode block\n```\n",table:"\n |表头|表头| \n |----|----| \n |单元格|单元格| \n |单元格|单元格| \n"},d=n[t];"image"==t&&(d=n.image(e)),o+=d,i.value=o,this.showPreview(),this.showLineNum({target:{value:o}})},XqEditor.prototype.uploadImg=async function(t){let e=t.target.files;this.editor.files=e},XqEditor.prototype.toggleEditorMode=function(t){let e=document.querySelector(".xqeditor-editor");"edit"==t?(this.editor.isPreview=!1,this.editor.isEdit=!this.editor.isEdit,e.classList.remove("preview"),e.classList.toggle("edit")):(this.editor.isEdit=!1,this.editor.isPreview=!this.editor.isPreview,e.classList.remove("edit"),e.classList.toggle("preview"))},XqEditor.prototype.scaleEditor=function(){let t=document.querySelector(".xqeditor-editor");this.editor.isScale=!this.editor.isScale,this.editor.isScale?t.classList.add("scale"):t.classList.remove("scale")},XqEditor.prototype.showEditorInfo=function(t){let e=document.querySelector(".xqeditor-info");t?e.classList.remove("hide"):e.classList.add("hide")};export default XqEditor;